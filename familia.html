<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>√Ålbum da Fam√≠lia</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      margin: 0;
      padding: 0;
      color: #3e2f1c;
      background: url('60ecf6bc-423b-4ece-b3ea-81b1e6e6f1c8.png') no-repeat center center fixed;
      background-size: cover;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(100, 80, 50, 0.6);
      backdrop-filter: blur(6px);
      z-index: -1;
    }
    header {
      background: rgba(107, 79, 42, 0.8);
      color: #fdfaf5;
      text-align: center;
      padding: 20px;
      border-bottom: 5px solid #8c6b3f;
    }
    nav {
      display: flex;
      justify-content: center;
      background: rgba(140, 107, 63, 0.9);
    }
    nav button {
      flex: 1;
      padding: 12px;
      background: #d2b48c;
      border: none;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      color: #3e2f1c;
      transition: background 0.3s;
    }
    nav button:hover {
      background: #e6cfa6;
    }
    .container {
      padding: 20px;
      background: rgba(252, 249, 242, 0.8);
      margin: 20px;
      border-radius: 10px;
    }
    .hidden { display: none; }
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 10px;
    }
    .photo-card {
      position: relative;
      background: #fffaf2;
      border: 2px solid #c2a77d;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
      filter: sepia(0.6) contrast(0.9) brightness(0.95);
      cursor: pointer;
      transition: transform 0.2s;
    }
    .photo-card:hover {
      transform: scale(1.03);
    }
    .photo-card img {
      width: 100%;
      display: block;
    }
    .delete-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(255,255,255,0.7);
      border: 1px solid #8c6b3f;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      z-index: 10;
    }
    .upload-area {
      margin: 20px 0;
      padding: 20px;
      border: 2px dashed #8c6b3f;
      text-align: center;
      background: #fcf9f2;
      cursor: pointer;
      border-radius: 10px;
      transition: background 0.3s;
    }
    .upload-area.dragover {
      background: #f0e7da;
    }
    .search-box {
      margin-bottom: 15px;
      text-align: center;
    }
    .search-box input {
      width: 60%;
      padding: 8px;
      font-size: 16px;
      border-radius: 5px;
      border: 2px solid #8c6b3f;
    }
    footer {
      background: rgba(107, 79, 42, 0.8);
      color: #fdfaf5;
      text-align: center;
      padding: 15px;
      margin-top: 20px;
      border-top: 5px solid #8c6b3f;
    }
    #musicControl {
      position: fixed;
      top: 15px;
      right: 15px;
      background: rgba(255,255,255,0.7);
      border: 2px solid #8c6b3f;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      z-index: 100;
    }

    /* Modal */
    #photoModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
    }
    #photoModal.active {
      opacity: 1;
      pointer-events: auto;
    }
    #photoModalContent {
      background: rgba(252,249,242,0.95);
      display: flex;
      flex-direction: row;
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
      overflow: hidden;
      border: 2px solid #c2a77d;
      box-shadow: 3px 3px 10px rgba(0,0,0,0.2);
      position: relative;
    }
    #modalImage {
      max-width: 60%;
      max-height: 90%;
      object-fit: contain;
      border-right: 1px solid #c2a77d;
      filter: sepia(0.5) contrast(0.9) brightness(0.95);
    }
    #modalDescription {
      padding: 20px;
      max-width: 40%;
      color: #3e2f1c;
      font-family: 'Georgia', serif;
      overflow-y: auto;
    }
    #modalClose {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 25px;
      background: none;
      border: none;
      color: #3e2f1c;
      cursor: pointer;
    }

    @media (max-width: 768px) {
      .gallery { grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 8px; }
      #photoModalContent { flex-direction: column; }
      #modalImage { max-width: 100%; max-height: 50%; border-right: none; border-bottom: 1px solid #c2a77d; }
      #modalDescription { max-width: 100%; padding: 15px; }
      .search-box input { width: 90%; }
    }
  </style>
</head>
<body>
<header>
  <h1>√Ålbum de Fam√≠lia</h1>
  <p>Lembran√ßas</p>
</header>

<nav>
  <button onclick="showTab('momentos')">Momentos</button>
  <button onclick="showTab('viagens')">Viagens</button>
  <button onclick="showTab('pessoas')">Pessoas</button>
</nav>

<div class="container">
  <div class="upload-area" id="uploadArea">
    Arraste suas fotos aqui ou clique para selecionar
    <input type="file" id="fileInput" accept="image/*" multiple hidden>
  </div>

  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Pesquisar fotos por descri√ß√£o...">
  </div>

  <div id="momentos" class="tab">
    <h2>Momentos</h2>
    <div class="gallery" id="momentosGallery"></div>
  </div>
  <div id="viagens" class="tab hidden">
    <h2>Viagens</h2>
    <div class="gallery" id="viagensGallery"></div>
  </div>
  <div id="pessoas" class="tab hidden">
    <h2>Pessoas</h2>
    <div class="gallery" id="pessoasGallery"></div>
  </div>
</div>

<footer>
  <p>√Ålbum da familia ¬© 2025 ‚Äî mem√≥rias que duram üåª</p>
</footer>

<audio id="bgMusic" src="Horizonte azul(MP3_160K).mp3" autoplay loop></audio>
<div id="musicControl">‚è∏Ô∏è</div>

<!-- Modal -->
<div id="photoModal">
  <div id="photoModalContent">
    <img id="modalImage" src="" alt="Foto">
    <div id="modalDescription"></div>
    <button id="modalClose">‚úñ</button>
  </div>
</div>

<script>
let activeGallery = 'momentosGallery';

function showTab(tabId){
  document.querySelectorAll('.tab').forEach(tab=>tab.classList.add('hidden'));
  document.getElementById(tabId).classList.remove('hidden');
  activeGallery = tabId+'Gallery';
  applySearch();
}

const uploadArea = document.getElementById('uploadArea');
const fileInput = document.getElementById('fileInput');
uploadArea.addEventListener('click',()=>fileInput.click());
uploadArea.addEventListener('dragover',e=>{e.preventDefault();uploadArea.classList.add('dragover');});
uploadArea.addEventListener('dragleave',()=>uploadArea.classList.remove('dragover'));
uploadArea.addEventListener('drop',e=>{e.preventDefault();uploadArea.classList.remove('dragover');handleFiles(e.dataTransfer.files);});
fileInput.addEventListener('change',()=>handleFiles(fileInput.files));

function handleFiles(files){
  [...files].forEach(file=>{
    const reader = new FileReader();
    reader.onload = e=>{
      const description = prompt("Digite uma descri√ß√£o para a foto:");
      addPhoto(activeGallery,e.target.result,description);
      savePhotos();
    };
    reader.readAsDataURL(file);
  });
}

function addPhoto(galleryId, src, description){
  const gallery=document.getElementById(galleryId);
  const card=document.createElement('div');
  card.className='photo-card';
  card.innerHTML = `
    <div class="delete-btn">üóë</div>
    <img src="${src}" alt="foto" data-description="${description||'Sem descri√ß√£o'}">`;
  gallery.appendChild(card);
  setupPhotoClick();
}

function setupPhotoClick(){
  document.querySelectorAll('.photo-card img').forEach(img=>{
    img.onclick=()=>{
      modalImage.src=img.src;
      modalDescription.textContent=img.dataset.description;
      modal.classList.add('active');
    };
  });
  document.querySelectorAll('.delete-btn').forEach(btn=>{
    btn.onclick=e=>{
      e.stopPropagation();
      if(confirm("Tem certeza que deseja apagar esta foto?")){
        btn.parentElement.remove();
        savePhotos();
      }
    };
  });
}

// Modal
const modal=document.getElementById('photoModal');
const modalImage=document.getElementById('modalImage');
const modalDescription=document.getElementById('modalDescription');
const modalClose=document.getElementById('modalClose');
modalClose.addEventListener('click',()=>modal.classList.remove('active'));
modal.addEventListener('click',e=>{if(e.target===modal) modal.classList.remove('active');});

// M√∫sica
const bgMusic=document.getElementById('bgMusic');
const musicControl=document.getElementById('musicControl');
let playing=true;
musicControl.addEventListener('click',()=>{
  if(playing){bgMusic.pause();musicControl.textContent='‚ñ∂Ô∏è';}
  else{bgMusic.play();musicControl.textContent='‚è∏Ô∏è';}
  playing=!playing;
});

// ----------------- localStorage -----------------
function savePhotos(){
  const galleries=['momentosGallery','viagensGallery','pessoasGallery'];
  const data={};
  galleries.forEach(id=>{
    const photos=[];
    document.querySelectorAll(`#${id} .photo-card img`).forEach(img=>{
      photos.push({src: img.src, description: img.dataset.description});
    });
    data[id]=photos;
  });
  localStorage.setItem('photoAlbum',JSON.stringify(data));
}

function loadPhotos(){
  const data=JSON.parse(localStorage.getItem('photoAlbum')||'{}');
  for(let galleryId in data){
    data[galleryId].forEach(item=>{
      const galleryIdOnly = galleryId;
      const card=document.createElement('div');
      card.className='photo-card';
      card.innerHTML = `<div class="delete-btn">üóë</div><img src="${item.src}" alt="foto" data-description="${item.description}">`;
      document.getElementById(galleryIdOnly).appendChild(card);
    });
  }
  setupPhotoClick();
}
window.onload=()=>{loadPhotos(); applySearch();};

// ----------------- Pesquisa -----------------
const searchInput=document.getElementById('searchInput');
searchInput.addEventListener('input',applySearch);
function applySearch(){
  const filter=searchInput.value.toLowerCase();
  document.querySelectorAll(`#${activeGallery} .photo-card img`).forEach(img=>{
    const desc=img.dataset.description.toLowerCase();
    img.parentElement.style.display=desc.includes(filter)?'block':'none';
  });
}
</script>
</body>
</html>
